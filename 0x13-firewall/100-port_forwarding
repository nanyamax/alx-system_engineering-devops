# ufw configuration file

# Set the default policy to deny all incoming traffic
DEFAULT_INPUT_POLICY="DROP"
DEFAULT_OUTPUT_POLICY="ACCEPT"
DEFAULT_FORWARD_POLICY="DROP"

# Allow incoming SSH traffic
-A ufw-before-input -p tcp --dport 22 -j ACCEPT

# Allow incoming traffic on port 8080
-A ufw-before-input -p tcp --dport 8080 -j ACCEPT

# Redirect incoming traffic from port 8080 to port 80
-A ufw-before-forward -p tcp --dport 8080 -j REDIRECT --to-port 80

# Allow outgoing traffic
-A ufw-before-output -j ACCEPT

# Allow traffic to/from loopback device
-A ufw-before-input -i lo -j ACCEPT
-A ufw-before-output -o lo -j ACCEPT

# Allow established and related traffic
-A ufw-before-input -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A ufw-before-output -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT

# Set the default policies for each chain
-P INPUT $DEFAULT_INPUT_POLICY
-P OUTPUT $DEFAULT_OUTPUT_POLICY
-P FORWARD $DEFAULT_FORWARD_POLICY

# Enable ufw
ENABLED=yes
